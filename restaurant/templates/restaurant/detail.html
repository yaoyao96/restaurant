<!DOCTYPE html>
    <title>{{restaurant.r_name}} Detail</title>
    <div class="ui-widget-header ui-corner-all form">
        <h1>{{restaurant.r_name}}</h1>
        <h2>{{restaurant.r_address}}</h2>
        <a href="{% url 'restaurant:comment' restaurant.id %}" class="ui-button" style="margin: 5px">Add Comment</a>
    </div>
    {% if restaurant.comment_set.all %}
        <table class="items ui-widget-content ui-corner-all">
                {% csrf_token %}
                {% for comment in restaurant.comment_set.all %}
            <tr style="height: 50px;"><td>
                   <p style="background-color:rgba(235, 233, 228, 0.856);padding: 3px"><i class="fas fa-user-circle"></i> &nbsp;
                    <strong>{{comment.c_user.u_name}}</strong>
                    {% for i in "x"|ljust:comment.c_rate %}
                    <span style="color: gold">&#9733;</span>
                    {% endfor %}
                </p>
                <!-- description -->
                    <div class="crop">{{ comment.c_desc }}
                    </div>
                    <!-- here is reply -->
                    <div style="border-left: 5px solid green; background-color: rgba(211, 211, 211, 0.411); margin:10px; padding: 2px">Here is reply</div>
                <!-- like & reply  -->
                    <div class="comment">
                    <i counter="{{ forloop.counter }}" commentId="{{comment.id}}" click=true class="fa fa-thumbs-up" style="margin: 5px;color:gray" ></i>
                    <span id="like_count{{forloop.counter}}">{{comment.c_like}}</span>
                    <input class="ui-button" type="submit" value="Reply"></div>
            </td></tr>
        {% endfor %}
            </table>
    {% else %}
        <p class="items ui-widget-content ui-corner-all">No comment yet</p>
    {% endif %}
    
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <style>
        .form { margin: auto; text-align: center; width: 50vw;  }
        .items { margin: auto; width: 50vw;}
        .comment {float: right; margin: 10px;}
        .crop {width:300px; overflow:hidden; height:50px; line-height:50px;}â€‹
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
    $(document).ready(function(){
        $("i").click(function(){
          let like = $(this).attr("click")
          console.log(typeof like)
          if(like){
          $(this).css("color","red")
          var comment_id = $(this).attr("commentId")
          $.post(comment_id+"/likecomment/",
          {
              csrfmiddlewaretoken: "{{ csrf_token }}"
            }
        )
          var counter = $(this).attr("counter")
          var like_add = parseInt($('#like_count'+counter).html())+1
          $('#like_count'+counter).html(like_add)
          $(this).attr("click", null)
        }
    })})
      </script>
    